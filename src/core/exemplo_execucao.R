# üéÆ Exemplo de Execu√ß√£o - Projeto Pok√©mon Elite dos 4
# Autor: Case T√©cnico de An√°lise com R
# Data: 2024

# Este arquivo demonstra como executar o projeto passo a passo

cat("üéÆ ==========================================\n")
cat("üéÆ EXEMPLO DE EXECU√á√ÉO DO PROJETO\n")
cat("üéÆ Pok√©mon Elite dos 4 - An√°lise com R\n")
cat("üéÆ ==========================================\n\n")

# =============================================================================
# ETAPA 1: CONFIGURA√á√ÉO INICIAL
# =============================================================================

cat("üì¶ ETAPA 1: Configura√ß√£o Inicial\n")
cat("================================\n")

# Carregar configura√ß√µes do projeto
cat("‚öôÔ∏è  Carregando configura√ß√µes...\n")
source("config.R")

# Verificar se os diret√≥rios foram criados
cat("üìÅ Verificando estrutura de diret√≥rios...\n")
list.dirs(recursive = FALSE)

cat("‚úÖ Configura√ß√£o inicial conclu√≠da!\n\n")

# =============================================================================
# ETAPA 2: INSTALA√á√ÉO DE PACOTES
# =============================================================================

cat("üì¶ ETAPA 2: Instala√ß√£o de Pacotes\n")
cat("================================\n")

# Verificar pacotes necess√°rios
required_packages <- c("dplyr", "tidyr", "readr", "ggplot2", "caret", "randomForest", "GA")

cat("üîç Verificando pacotes instalados...\n")
installed_packages <- installed.packages()[,"Package"]
missing_packages <- required_packages[!required_packages %in% installed_packages]

if (length(missing_packages) > 0) {
  cat("‚ö†Ô∏è  Pacotes em falta detectados:\n")
  for (pkg in missing_packages) {
    cat("   -", pkg, "\n")
  }
  
  cat("\nüì¶ Instalando pacotes em falta...\n")
  source("scripts/install_packages.R")
} else {
  cat("‚úÖ Todos os pacotes necess√°rios j√° est√£o instalados!\n")
}

cat("\n")

# =============================================================================
# ETAPA 3: EXECU√á√ÉO COMPLETA (OPCIONAL)
# =============================================================================

cat("üöÄ ETAPA 3: Execu√ß√£o Completa (Opcional)\n")
cat("========================================\n")

cat("üí° Para executar toda a an√°lise de uma vez, use:\n")
cat("   source('scripts/main_analysis.R')\n\n")

cat("üí° Para executar etapas individuais, continue com este exemplo.\n\n")

# =============================================================================
# ETAPA 4: PREPARA√á√ÉO DOS DADOS
# =============================================================================

cat("üìÇ ETAPA 4: Prepara√ß√£o dos Dados\n")
cat("================================\n")

cat("üîç Verificando arquivos de dados...\n")

# Verificar se os arquivos de dados existem
if (file.exists("data/pokemon_data.csv") && file.exists("data/elite_four_data.csv")) {
  cat("‚úÖ Arquivos de dados encontrados!\n")
  
  # Executar prepara√ß√£o de dados
  cat("‚öôÔ∏è  Executando prepara√ß√£o de dados...\n")
  source("scripts/01_data_preparation.R")
  
} else {
  cat("‚ùå Arquivos de dados n√£o encontrados!\n")
  cat("   Verifique se os arquivos est√£o em data/\n")
  stop("Arquivos de dados necess√°rios n√£o encontrados")
}

cat("\n")

# =============================================================================
# ETAPA 5: AN√ÅLISE EXPLORAT√ìRIA
# =============================================================================

cat("üîç ETAPA 5: An√°lise Explorat√≥ria\n")
cat("================================\n")

cat("üìä Executando an√°lise explorat√≥ria...\n")
source("scripts/02_exploratory_analysis.R")

cat("‚úÖ An√°lise explorat√≥ria conclu√≠da!\n")
cat("üìÅ Gr√°ficos salvos em output/plots/\n\n")

# =============================================================================
# ETAPA 6: MODELAGEM ESTAT√çSTICA
# =============================================================================

cat("ü§ñ ETAPA 6: Modelagem Estat√≠stica\n")
cat("================================\n")

cat("üß† Executando modelagem estat√≠stica...\n")
source("scripts/03_statistical_modeling.R")

cat("‚úÖ Modelagem estat√≠stica conclu√≠da!\n")
cat("üìÅ Modelos salvos em output/models/\n\n")

# =============================================================================
# ETAPA 7: OTIMIZA√á√ÉO DO QUINTETO
# =============================================================================

cat("üéØ ETAPA 7: Otimiza√ß√£o do Quinteto\n")
cat("==================================\n")

cat("‚ö° Executando otimiza√ß√£o do quinteto...\n")
source("scripts/04_team_optimization.R")

cat("‚úÖ Otimiza√ß√£o conclu√≠da!\n")
cat("üìÅ Resultados salvos em output/tables/\n\n")

# =============================================================================
# ETAPA 8: SIMULA√á√ÉO DE BATALHAS
# =============================================================================

cat("‚öîÔ∏è ETAPA 8: Simula√ß√£o de Batalhas\n")
cat("================================\n")

cat("üéÆ Executando simula√ß√µes de batalha...\n")
battle_results <- source("scripts/05_battle_simulation.R")

cat("‚úÖ Simula√ß√µes conclu√≠das!\n")
cat("üìä Resultados salvos em output/tables/\n\n")

# =============================================================================
# ETAPA 9: AN√ÅLISE DOS RESULTADOS
# =============================================================================

cat("üìä ETAPA 9: An√°lise dos Resultados\n")
cat("==================================\n")

# Carregar resultados das simula√ß√µes
cat("üìÇ Carregando resultados das simula√ß√µes...\n")

if (file.exists("output/tables/battle_summary.csv")) {
  battle_summary <- read_csv("output/tables/battle_summary.csv", show_col_types = FALSE)
  pokemon_performance <- read_csv("output/tables/pokemon_performance.csv", show_col_types = FALSE)
  member_difficulty <- read_csv("output/tables/member_difficulty.csv", show_col_types = FALSE)
  
  cat("‚úÖ Resultados carregados com sucesso!\n\n")
  
  # Mostrar resumo dos resultados
  cat("üìà RESUMO DOS RESULTADOS:\n")
  cat("   - Total de batalhas:", nrow(battle_summary), "\n")
  cat("   - Taxa de vit√≥ria geral:", round(mean(battle_summary$result == "Victory") * 100, 1), "%\n")
  
  cat("\nüèÜ MELHOR POK√âMON:\n")
  best_pokemon <- pokemon_performance[1, ]
  cat("   ", best_pokemon$player_pokemon, ":", round(best_pokemon$victory_rate, 1), "% vit√≥rias\n")
  
  cat("\nüëë MEMBRO MAIS DIF√çCIL:\n")
  hardest_member <- member_difficulty[1, ]
  cat("   ", hardest_member$member, ":", round(hardest_member$victory_rate, 1), "% vit√≥rias\n")
  
} else {
  cat("‚ùå Resultados das simula√ß√µes n√£o encontrados!\n")
}

cat("\n")

# =============================================================================
# ETAPA 10: VISUALIZA√á√ÉO DOS RESULTADOS
# =============================================================================

cat("üìä ETAPA 10: Visualiza√ß√£o dos Resultados\n")
cat("========================================\n")

cat("üé® Verificando gr√°ficos gerados...\n")

# Listar arquivos de gr√°ficos
plot_files <- list.files("output/plots", pattern = "\\.png$", full.names = TRUE)

if (length(plot_files) > 0) {
  cat("‚úÖ Gr√°ficos encontrados:\n")
  for (plot_file in plot_files) {
    cat("   -", basename(plot_file), "\n")
  }
} else {
  cat("‚ö†Ô∏è  Nenhum gr√°fico encontrado em output/plots/\n")
}

cat("\n")

# =============================================================================
# ETAPA 11: RELAT√ìRIO FINAL
# =============================================================================

cat("üìã ETAPA 11: Relat√≥rio Final\n")
cat("============================\n")

cat("üìù Gerando relat√≥rio final...\n")

# Criar relat√≥rio simples
report_summary <- paste0(
  "# üéÆ Relat√≥rio de Execu√ß√£o - Projeto Pok√©mon Elite dos 4\n\n",
  "## üìä Resumo da Execu√ß√£o\n\n",
  "Este relat√≥rio foi gerado automaticamente durante a execu√ß√£o do projeto.\n\n",
  "## üéØ Objetivos Alcan√ßados\n\n",
  "- ‚úÖ Prepara√ß√£o e limpeza dos dados\n",
  "- ‚úÖ An√°lise explorat√≥ria completa\n",
  "- ‚úÖ Modelagem estat√≠stica\n",
  "- ‚úÖ Otimiza√ß√£o do quinteto\n",
  "- ‚úÖ Simula√ß√£o de batalhas\n",
  "- ‚úÖ An√°lise dos resultados\n\n",
  "## üìÅ Arquivos Gerados\n\n",
  "Todos os resultados foram salvos nos diret√≥rios apropriados:\n",
  "- `output/tables/`: Tabelas com dados processados\n",
  "- `output/plots/`: Gr√°ficos e visualiza√ß√µes\n",
  "- `output/models/`: Modelos treinados\n",
  "- `output/reports/`: Relat√≥rios gerados\n\n",
  "## üöÄ Pr√≥ximos Passos\n\n",
  "1. Revisar os resultados gerados\n",
  "2. Analisar o quinteto recomendado\n",
  "3. Testar as estrat√©gias sugeridas\n",
  "4. Ajustar conforme necess√°rio\n\n",
  "---\n",
  "*Relat√≥rio gerado automaticamente - ", Sys.time(), "*"
)

# Salvar relat√≥rio
writeLines(report_summary, "output/reports/relatorio_execucao.md")

cat("‚úÖ Relat√≥rio de execu√ß√£o gerado!\n")
cat("üìÅ Salvo em output/reports/relatorio_execucao.md\n\n")

# =============================================================================
# RESUMO FINAL
# =============================================================================

cat("üéâ ==========================================\n")
cat("üéâ EXECU√á√ÉO DO EXEMPLO CONCLU√çDA!\n")
cat("üéâ ==========================================\n\n")

cat("üìä O QUE FOI EXECUTADO:\n")
cat("   ‚úÖ Configura√ß√£o inicial\n")
cat("   ‚úÖ Verifica√ß√£o de pacotes\n")
cat("   ‚úÖ Prepara√ß√£o de dados\n")
cat("   ‚úÖ An√°lise explorat√≥ria\n")
cat("   ‚úÖ Modelagem estat√≠stica\n")
cat("   ‚úÖ Otimiza√ß√£o do quinteto\n")
cat("   ‚úÖ Simula√ß√£o de batalhas\n")
cat("   ‚úÖ An√°lise dos resultados\n")
cat("   ‚úÖ Gera√ß√£o de relat√≥rio\n\n")

cat("üìÅ ARQUIVOS GERADOS:\n")
cat("   - Dados processados em data/\n")
cat("   - Tabelas em output/tables/\n")
cat("   - Gr√°ficos em output/plots/\n")
cat("   - Modelos em output/models/\n")
cat("   - Relat√≥rios em output/reports/\n\n")

cat("üéØ PR√ìXIMOS PASSOS:\n")
cat("   - Revisar o quinteto recomendado\n")
cat("   - Analisar as estrat√©gias sugeridas\n")
cat("   - Testar o time no jogo\n")
cat("   - Ajustar conforme necess√°rio\n\n")

cat("üéÆ Boa sorte na Elite dos 4!\n")
cat("‚öîÔ∏è Que o melhor treinador ven√ßa!\n\n")

# =============================================================================
# FUN√á√ïES √öTEIS PARA AN√ÅLISE ADICIONAL
# =============================================================================

cat("üí° FUN√á√ïES √öTEIS PARA AN√ÅLISE ADICIONAL:\n")
cat("========================================\n\n")

cat("üîç Para analisar um Pok√©mon espec√≠fico:\n")
cat("   pokemon_data[pokemon_data$name == 'Charizard', ]\n\n")

cat("üìä Para ver estat√≠sticas por tipo:\n")
cat("   pokemon_data %>% group_by(type1) %>% summarise(avg_total = mean(total))\n\n")

cat("üéØ Para ver o time otimizado:\n")
cat("   read_csv('output/tables/best_team.csv')\n\n")

cat("‚öîÔ∏è Para ver resultados das batalhas:\n")
cat("   read_csv('output/tables/battle_summary.csv')\n\n")

cat("üé® Para visualizar gr√°ficos:\n")
cat("   list.files('output/plots', full.names = TRUE)\n\n")

cat("üìù Para editar relat√≥rios:\n")
cat("   file.edit('output/reports/relatorio_execucao.md')\n\n")

cat("üéÆ Projeto executado com sucesso!\n")
cat("üöÄ Todos os objetivos foram alcan√ßados!\n\n")
